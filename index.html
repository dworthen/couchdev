<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Couch Dev</title><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/6a7c735a67034572bf84.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6a7c735a67034572bf84.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-6fd6122508a3ecee2da5.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/3ef630e34cd10ba68f9d468ac363ff81c534e1e9.386717e5d53cbb6c2786.js" as="script"/><link rel="preload" href="/_next/static/chunks/6335da8543c52d3af527c387f688061357787349.6e2460ecc34e06341fc5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-226a516cb1542ff60218.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/index-6c809aeb8517bc05062f.js" as="script"/></head><body><div id="__next"><div class="sc-1ho0hv8-0 hslvLF"><div><div><main><article><span class="sc-10rhmba-0 jUFVk">March 16, 2019</span><h2 class="sc-10rhmba-1 kbUVxl"><a href="/posts/blazor-state-management-3-cascading-parameters">Blazor State Management Part III - Cascading Parameters</a></h2><p>Cascading parameters provides a way to share data and behavior from ancestor components to child components without having to manually pass parameters down in intermediate components. Components can access the data it needs without requiring parent components to manage data dependencies. In this article, we will explore using cascading parameters, along with event delegation, in order to share data throughout a component tree.</p><hr/></article><article><span class="sc-10rhmba-0 jUFVk">March 14, 2019</span><h2 class="sc-10rhmba-1 kbUVxl"><a href="/posts/blazor-state-management-2-event-delegation">Blazor State Management Part II - Event Delegation</a></h2><p>Data-binding is a useful concept and tool. In practice, data-binding lets Blazor developers manage and manipulate local component state and rest easy knowing the component UI is always working with, and reflecting the current state. The problem, data-binding does not work with state shared across components. In this article, we explore event delegation. A technique for handling state changes and for sharing state across components. </p><hr/></article><article><span class="sc-10rhmba-0 jUFVk">March 08, 2019</span><h2 class="sc-10rhmba-1 kbUVxl"><a href="/posts/blazor-state-management-1-data-binding">Blazor State Management Part I - Data-Binding</a></h2><p>Data-Binding. It&#x27;s the magical glue that binds an application&#x27;s UI to its business model. Or, more formally, It&#x27;s a process for updating UI when application state changes and vice versa, keeping the state in sync with changes occurring in the UI. Blazor supports data-binding, but to what extent?</p><hr/></article><article><span class="sc-10rhmba-0 jUFVk">May 24, 2018</span><h2 class="sc-10rhmba-1 kbUVxl"><a href="/posts/typescript-and-runtime-type-safety">TypeScript and Runtime Type Safety</a></h2><p>Intellisense, type definitions, tooling, and documentation. A few of the benefits that follow from TypeScript&#x27;s compile-time static type system but it&#x27;s not all good news. There are some drawbacks. For starters, the type checking, and thus type safety, occur at compile time. What about Runtime type safety?</p><hr/></article><article><span class="sc-10rhmba-0 jUFVk">March 16, 2018</span><h2 class="sc-10rhmba-1 kbUVxl"><a href="/posts/authoring-typescript-libraries">Authoring TypeScript Libraries</a></h2><p>You&#x27;ve written a TypeScript library. Now what? Time to publish, of course. But how? Do you publish it as a TypeScript module or compile it to JavaScript? Should it run in browser or Node.js, or both? What about ES5  versus ES6 or ESNext? And don&#x27;t forget, some people prefer AMD modules.</p><hr/></article><article><span class="sc-10rhmba-0 jUFVk">November 12, 2017</span><h2 class="sc-10rhmba-1 kbUVxl"><a href="/posts/aspnet-linux-edition">ASP.NET Core. Linux Edition</a></h2><p>ASP.NET Core + Linux = Freedom. Love ASP.NET? What about Linux? Do you wish to bring the two together? Well now you can with ASP.NET core. Deploy your favorite web stack to your favorate hosting environment. Or, develop from the comfort of your favorite MacBook or Linux box.</p><hr/></article><article><span class="sc-10rhmba-0 jUFVk">June 15, 2016</span><h2 class="sc-10rhmba-1 kbUVxl"><a href="/posts/sticky-table-head">Fixed HTML Table Header</a></h2><p>Large HTML tables got you down? Easily fix table headers for readability. Best part. No framework or library necessary.</p><hr/></article><article><span class="sc-10rhmba-0 jUFVk">April 20, 2016</span><h2 class="sc-10rhmba-1 kbUVxl"><a href="/posts/hello-world">Hello World</a></h2><p>Welcome to my blog!</p><hr/></article></main></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"filePath":"/home/runner/work/couchdev/couchdev/posts/2019-03-16-blazor-state-management-part-iii-cascading-parameters.mdx","data":{"template":"post","title":"Blazor State Management Part III - Cascading Parameters","slug":"blazor-state-management-3-cascading-parameters","published":true,"date":"2019-03-16","description":"Cascading parameters provides a way to share data and behavior from ancestor components to child components without having to manually pass parameters down in intermediate components. Components can access the data it needs without requiring parent components to manage data dependencies. In this article, we will explore using cascading parameters, along with event delegation, in order to share data throughout a component tree.","category":"Blazor","tags":["Blazor"]},"content":"\u003e **This article explores cascading values in Blazor 0.7.0**\n\u003e\n\u003e **The source code for this article can be found [here](https://github.com/dworthen/BlazorStateManagement/tree/part-03-cascading-parameters)**\n\n**This article is part of a Blazor state management exploration series.**\n\n1. [Blazor State Management Part I - Data-Binding](/posts/blazor-state-management-1-data-binding)\n2. [Blazor State Management Part II - Event Delegation](/posts/blazor-state-management-2-event-delegation)\n3. Blazor State Management Part III - Cascading Parameters\n\n- - -\n\n[The last article](/posts/blazor-state-management-2-event-delegation) ended with a question. How do we share data within the following component structure?\n\n![Cascading parameters.](/media/event-delegation-complicated.png)\n\nWith event delegation, we could update middle components to accept a `person` parameter and pass it through to child components that need it. We would also need to pass event handlers through the middle components. A doable, but a messy and cumbersome process.\n\nIdeally, we would pass parameters from the parent component directly to child components that need them, no matter how nested the child components are. Well, it turns out, we can. [CascadingValue](https://docs.microsoft.com/en-us/aspnet/core/razor-components/components?view=aspnetcore-3.0#cascading-values-and-parameters) is a unique tag that allows us to hoist parameters for child components, even nested ones, to acccess. This should feel familiar to anyone who has used [React context](https://reactjs.org/docs/context.html).\n\nLet's create a `MiddleComponent` to contain the `DisplayPerson` and `UpdatePerson` components.\n\n```dotnet\n@* MiddleComponent.cshtml *@\n\u003cdiv class=\"boxed\"\u003e\n    \u003ch4\u003eDisplayPerson Component\u003c/h4\u003e\n    \u003cDisplayPerson\u003e\u003c/DisplayPerson3\u003e\n\u003c/div\u003e\n\u003cdiv class=\"boxed\"\u003e\n    \u003ch4\u003eUpdatePerson Componet\u003c/h4\u003e\n    \u003cUpdatePerson\u003e\u003c/UpdatePerson3\u003e\n\u003c/div\u003e\n```\n\nNotice that we are no longer passing parameters to `DisplayPerson` or `UpdatePerson`. This is because the components will check the hoisted space for the values instead of receiving them directly as parameters. Update `index.cshtml` to use the newly created `MiddleComponent`.\n\n```dotnet\n@* index.cshtml *@\n...\n\u003cMiddleComponent\u003e\u003c/MiddleComponent\u003e\n\n@functions {\n    protected Person person { get; set; } = new Person { Name = \"Derek\" };\n    ...\n}\n```\n\nThis will not work. Remember, `DisplayPerson` and `UpdatePerson` need a `Person` object to work with. So let's wrap `MiddleComponent` in a `CascadingValue` component to hoist our `person` object.\n\n```dotnet\n@* index.cshtml *@\n...\n\u003cCascadingValue Value=\"@person\"\u003e\n \t\u003cMiddleComponent\u003e\u003c/MiddleComponent\u003e\n\u003c/CascadingValue\u003e\n...\n```\n\nThis is still not enough. `UpdatePerson` also expects a function parameter. A function that will handle updating the state when necessary. Each `CascadingValue` can only hoist one value so we will need to nest tags. \n\n```dotnet\n@* index.cshtml *@\n\u003cCascadingValue Value=\"@person\"\u003e\n    \u003cCascadingValue \n        Value=\"@HandleChange\" \n        Name=\"HandleChange\" \n        T=\"Action\u003cUIChangeEventArgs\u003e\"\u003e\n        \u003cMiddleComponent\u003e\u003c/MiddleComponent\u003e\n    \u003c/CascadingValue\u003e\n\u003c/CascadingValue\u003e\n\n@functions {\n    protected Person person { get; set; } = new Person { Name = \"Derek\" };\n    protected void HandleChange (UIChangeEventArgs e)\n    {\n        person.Name = e.Value.ToString();\n        StateHasChanged();\n    }\n}\n```\n\nThe second `CascadingValue` component is hoisting a named parameter. Since the parameter is a method, we need to help Blazor identify the parameter type by specifying the type with the `T` parameter.\n\nNext, we need to update `UpdatePerson` and `DisplayPerson` to use `CascadingParameters` instead of normal parameters. We only need to update the decorators to specify `CascadingParameters`. Nothing else needs to change.\n\n```dotnet\n@* UpdatePerson.cshtml *@\n...\n@functions {\n    [CascadingParameter] \n    protected Person person { get; set; }\n    [CascadingParameter(Name = \"HandleChange\")] \n    protected Action\u003cUIChangeEventArgs\u003e CustomOnChange { get; set; }\n    ...\n}\n```\n\n```dotnet\n@* DisplayPerson.cshtml *@\n...\n@functions {\n    [CascadingParameter] protected Person person { get; set; }\n}\n```\n\nOur application should work as it did at the end of the event delegation article. Updating the person's name using the input field should update the name displayed in all components. \n\n- - -\n\n## Conclusion\n\nYes, it is possible to use cascading parameters to share state throughout an application, but it is messy. The Blazor docs use CSS style rules or theme information as an example for using cascading parameters. read-only UI state or theme information are good candidates for cascading parameters. Otherwise, not only do the values need to be cascaded but so do the methods that will be responsible for updating the hoisted values. Not to mention, `CascadingValue` can only hoist one value at a time, requiring nested tags for each cascading value.\n"},{"filePath":"/home/runner/work/couchdev/couchdev/posts/2019-03-14-blazor-state-management-part-ii-event-delegation.mdx","data":{"template":"post","title":"Blazor State Management Part II - Event Delegation","slug":"blazor-state-management-2-event-delegation","published":true,"date":"2019-03-14","description":"Data-binding is a useful concept and tool. In practice, data-binding lets Blazor developers manage and manipulate local component state and rest easy knowing the component UI is always working with, and reflecting the current state. The problem, data-binding does not work with state shared across components. In this article, we explore event delegation. A technique for handling state changes and for sharing state across components. ","category":"Blazor","tags":["Blazor"]},"content":"\u003e **This article explores event delegation in Blazor 0.7.0**\n\u003e\n\u003e **The source code for this article can be found [here](https://github.com/dworthen/BlazorStateManagement/tree/part-02-event-delegation)**\n\n**This article is part of a Blazor state management exploration series.**\n1. [Blazor State Management Part I - Data-Binding](/posts/blazor-state-management-1-data-binding)\n2. Blazor State Management Part II - Event Delegation\n3. [Blazor State Management Part III - Cascading Parameters](/posts/blazor-state-management-3-cascading-parameters)\n\n---\n\n[Previously](/posts/blazor-state-management-1-data-binding), we developed a sample application in order to explore data-binding in Blazor. Here is the current component structure of our sample application.\n\n![data-binding component structure](/media/component-structure.png)\n\nThe index page shares a `Person` object to two components, `DisplayPerson` and `UpdatePerson`. Changes to `person`  that occur in `UpdatePerson` do not show up in `DisplayPerson`. At least, not automatically. This behavior was observed and discussed in the previous article. \n\nSo how does one share objects across components and ensure that components are working with, and reflecting the most up-to-date state? One way to solve this problem is to use event delegation.\n\n\u003e **Event delegation** refers to the process of using event propagation (bubbling) to handle events at a higher level in the DOM than the element on which the event originated. \n\u003e\n\u003e \u003chttps://learn.jquery.com/events/event-delegation/\u003e\n\nInstead of handling events in `UpdatePerson`, events are bubbled up to the `index` page. The `index` page will handle the event, make changes to `person` and propagate the changes to child components. `UpdatePerson` and `DisplayPerson` in this case. \n\n- - -\n\n## Event handler\n\nAdd the following `HandleChange` method to the `index.cshtml` page. `HandleChange` will respond to input changes that occur in `UpdatePerson`, updating the `person`'s name and calling `StateHasChanged` to rerender the UI.\n\n```aspnet\n@* index.cshtml *@\n...\n@functions {\n...\n    private void HandleChange (UIChangeEventArgs e)\n    {\n        person.Name = e.Value.ToString();\n        StateHasChanged();\n    }\n}\n```\n\n- - -\n\n## Event Propagation (Bubbling)\n\nThe `HandleChange` event handler is in place. Now, we need to change `UpdatePerson` to bubble onchange events up to `index`/`HandleChange`. We can do this by adding a custom component parameter to `UpdatePerson`.\n\n```aspnet\n@* UpdatePerson *@\n...\n@functions {\n    ...\n    [Parameter] protected Action\u003cUIChangeEventArgs\u003e CustomOnChange { get; set; }\n\n    private void OnChange(UIChangeEventArgs e)\n    {\n        CustomOnChange?.Invoke(e);\n    }\n}\n```\n\nThe custom parameter, `CustomOnChange`, is defined as an `Action\u003cUIChangeEventArgs\u003e`. Actions are methods that except some list of parameters, `UIChangeEventArgs` in this case, and return nothing (null). Notice that this action defines a method that matches the `HandleChange` method signature. I think you can see where we are going here. \n\n\u003e **[More in-depth guide to Actions](https://www.codementor.io/aydindev/delegates-func-act-in-c-sharp-du107s5mj)**\n\nThe final piece of the puzzle, wiring up the components. Update the `index` page to pass in `HandleChange` to `UpdatePerson`. \n\n```aspnet\n@* index.cshtml *@\n...\n\u003cUpdatePerson person=\"@person\" \n    CustomOnChange=\"@HandleChange\"\u003e\u003c/UpdatePerson\u003e\n...\n```\n\nEssentially, we are exposing the onchange event from `UpdatePerson` to `index` as a custom event, `CustomOnChange`, and handling the event with `HandleChange`. \n\nLaunching this application and updating the name in the input field will show that `DisplayPerson` now updates to reflect the current name. Finally, we have a way to share objects across components.\n\n- - -\n\n## Conclusion\n\nWe started with one component structure/relationship and, through this article, and minor tweaks, we ended up with\n\n![event delegation relationship](/media/event-delegation.png)\n\nEvent delegation provides a way to organize components in a way that allows for sharing state across components. The process for using event delegation for this purpose is to 1) identify a parent component that will \"own\" the data and 2) bubble events/changes from child components up to the parent component, the one that \"owns\" the data, to handle changes. \n\nThere are some drawbacks to this method of sharing state. For example, how do we handle the following case?\n\n![Event delegation with nested components.](/media/event-delegation-complicated.png)\n\nIn this case, `DisplayPerson` and `UpdatePerson` still need access to `person` but the middle components know nothing about `person` and don't need to. We could update middle components to accept `person` parameters and pass them through to the child components that need it. We would also need to pass event handlers from the parent component through middle components down to child components. A doable process but messy and cumbersome. We will explore alternative solutions for handling this case in future articles.\n\nEvent delegation is only one of many methods for sharing data across components. We will examine other methods in future articles.\n"},{"filePath":"/home/runner/work/couchdev/couchdev/posts/2019-02-24-blazor-state-management1-data-binding.mdx","data":{"template":"post","title":"Blazor State Management Part I - Data-Binding","slug":"blazor-state-management-1-data-binding","published":true,"date":"2019-03-08","description":"Data-Binding. It's the magical glue that binds an application's UI to its business model. Or, more formally, It's a process for updating UI when application state changes and vice versa, keeping the state in sync with changes occurring in the UI. Blazor supports data-binding, but to what extent?","category":"Blazor","tags":["Blazor"]},"content":"\u003e **This article explores data-binding in Blazor 0.7.0**\n\u003e\n\u003e **The source code for this article can be found [here](https://github.com/dworthen/BlazorStateManagement/tree/part-01-data-binding).**\n\n**This article is part of a Blazor state management exploration series.**\n\n1. Blazor State Management Part I - Data-Binding\n2. [Blazor State Management Part II - Event Delegation](/posts/blazor-state-management-2-event-delegation)\n3. [Blazor State Management Part III - Cascading Parameters](/posts/blazor-state-management-3-cascading-parameters)\n\n---\n\nMVVM (Model-View-ViewModel) is a UI design pattern that separates the data layer, model, from the presentation layer, view. The pattern bridges the two layers with the ViewModel which is responsible for converting the model into a view-friendly form and for relaying view-driven updates back to the model.\n\n![MVVM Diagram](/media/mvvm-concrete.png)\n\nAn important part of the MVVM pattern is the communication between the view and ViewModel. When the ViewModel updates data the view automatically updates to reflect the changes. The opposite is also true. When the view updates data through user interactions, the ViewModel references the most up-to-date data. This is known as data-binding.\n\nIn short, data-binding means that the view always reflects the current ViewModel and the ViewModel stays in sync with updates that occur in the view, user-driven or otherwise.\n\nHere is an example of data-binding from the Blazor documentation.\n\n```aspnet\n\u003cinput type=\"checkbox\" class=\"form-check-input\" id=\"italicsCheck\" bind=\"@_italicsCheck\" /\u003e\nCurrent Value: @_italicsCheck\n\n@functions {\n\tprivate bool _italicsCheck { get; set; } = false;\n}\n```\n\nThe above is a simple component. The properties defined in the functions section act as our ViewModel and are accessible to the above HTML, the view, through razor syntax. In this case, the view displays a checked checkbox when the ViewModel's `_italicsCheck` is true. Furthermore, the value stored in `_italicsCheck` updates as users toggle the checkbox in the UI to match the new toggled state. This functionality, data-binding, is achieved with the `bind` attribute.\n\nTwo-way data-binding out of the box! So Blazor supports the MVVM design pattern, right? Not quite. Let's examine what happens when data is used across components.\n\n```aspnet\n@* UpdateMessage.cshtml *@\n\u003cdiv\u003eUpdateMessage Component Current Value: @Message\u003c/div\u003e\n\n\u003cdiv\u003e\n    \u003cinput type=\"text\" bind=\"@Message\" /\u003e\n\u003c/div\u003e\n\n@functions {\n    [Parameter] string Message { get; set; }\n}\n```\n\n```aspnet\n@* DisplayMessage.cshtml *@\n\u003cdiv\u003eDisplay Message Component Current Value: @Message\u003c/div\u003e\n\n@functions {\n    [Parameter] string Message { get; set; }\n}\n```\n\nAnd update `index.cshtml`\n\n```aspnet\n@* index.cshtml *@\n@page \"/\"\n\n\u003cDisplayMessage Message=\"@Message\"\u003e\u003c/DisplayMessage\u003e\n\u003cUpdateMessage Message=\"@Message\"\u003e\u003c/UpdateMessage\u003e\n\n@functions {\n    private string Message { get; set; } = \"Hello World\";\n}\n```\n\nNow, two components are using the same data. Let's see what happens when we update the message in UpdateMessage. Do updates propagate to the DisplayMessage component?\n\n![data-binding a string](/media/data-bind-1.png)\n\nUnfortunately, no. Data-binding is limited to the current component and child components. But wait! Like two-way binding on input tags, Blazor supports two-way binding on custom component parameters using the `bind-` prefix attribute. Let's implement that now.\n\n```aspnet\n@* index.cshtml *@\n...\n\u003cDisplayMessage bind-Message=\"@Message\"\u003e\u003c/DisplayMessage\u003e\n\u003cUpdateMessage bind-Message=\"@Message\"\u003e\u003c/UpdateMessage\u003e\n...\n```\n\nThe `bind-` prefix allows one to bind data to custom-component parameters. Before refreshing the application, we need to add the following `Action` parameter to UpdateMessage and DisplayMessage.\n\n```aspnet\n@* DisplayMessage.cshtml and UpdateMessage.cshtml *@\n...\n@functions {\n\t...\n\t[Parameter] Action\u003cstring\u003e MessageChanged { get; set; }\n}\n```\n\nWe will examine how this works in a future article. For now, cross your fingers!\n\n![data-binding with bind attribute](/media/data-bind-2.png)\n\nNo luck! Surely, the issue is that we are sharing a string across components. Passing a string is to pass by value. So each component is receiving its own copy of the string. AHA! Let's try using a POCO as our state object.\n\n```aspnet\n@* Person.cs *@\npublic class Person\n{\n    public string Name { get; set; }\n}\n```\n\nAnd repeat the same pattern from before...\n\n```aspnet\n@* DisplayPerson *@\n\u003cdiv\u003eDisplayPerson Component - Person's Name: @person.Name\u003c/div\u003e\n\n@functions {\n    [Parameter] Person person { get; set; }\n}\n```\n\n```aspnet\n@* UpdatePerson Component *@\n\u003cdiv\u003eUpdatePerson Component - Person's Name: @person.Name\u003c/div\u003e\n\n\u003cdiv\u003e\n    \u003cinput type=\"text\" bind=\"@person.Name\" /\u003e\n\u003c/div\u003e\n\n@functions {\n    [Parameter] Person person { get; set; }\n}\n```\n\nLet's not forget to update `index.cshtml` to use the new Person components.\n\n```aspnet\n@* index.cshtml *@\n...\n\u003cDisplayPerson person=\"@person\"\u003e\u003c/DisplayPerson\u003e\n\u003cUpdatePerson person=\"@person\"\u003e\u003c/UpdatePerson\u003e\n\n@functions {\n    ...\n    private Person person { get; set; } = new Person { Name = \"Derek\" };\n}\n```\n\nRefreshing our browser we get\n\n![Data-binding with poco](/media/data-binding-with-poco.png)\n\nDon't panic! Hope is not lost. Instead of relying on Blazor's data-binding let's try responding to the `onchange` event manually.\n\n```aspnet\n@* UpdatePerson.cshtml *@\n...\n\t\u003cinput type=\"text\" value=\"@person.Name\" onchange=\"@OnChange\" /\u003e\n...\n@functions {\n    ...\n    private void OnChange(UIChangeEventArgs e)\n    {\n        person.Name = (string)e.Value;\n    }\n}\n```\n\nIf you refresh the browser, you will see that we still have the same functionality. Well, we didn't break anything. We still have component-scoped data-binding. Why use an event listener instead of bind? Using an event listener allows us to have side effects, such as calling `StateHasChanged`.\n\n```aspnet\n@* UpdatePerson.cshtml *@\nprivate void OnChange(UIChangeEventArgs e)\n{\n    person.Name = (string)e.Value;\n    StateHasChanged();\n}\n```\n\n`StateHasChanged`, if you haven't guessed, is a Blazor function that tells the system that the state has changed which, in turn, triggers a rerender. Blazor renders UI similar to many popular JS frameworks. It maintains a virtual dom. When a rerender occurs, Blazor generates a new virtual dom, diffs it with the previous virtual dom and then minimally updates the real dom.\n\nMaybe, just maybe, manually calling `StateHasChanged` causes Blazor to rerender and diff the entire virtual dom and not just the local component dom. And...\n\n![Data-binding with statehaschanged](/media/data-binding-with-satehaschanged.png)\n\nTurns out, `StateHasChanged` is scoped to the current component and child components. No different from bind.\n\nWhat gives? DisplayPerson and UpdatePerson receive the same Person object. It is an object! It has to be passed by reference, right? This is true. DisplayPerson and UpdatePerson receive a reference to the same object. The problem lies in how rerendering works in Blazor.\n\nLet's prove that the shortcoming lies within the rendering mechanism. Add the following code to DisplayPerson\n\n```aspnet\n...\n@functions {\n...\n    protected async override Task OnInitAsync()\n        {\n            await base.OnInitAsync();\n            System.Timers.Timer timer = new System.Timers.Timer(10000);\n            await Task.Delay(6000);\n            StateHasChanged();\n        }\n...\n}\n```\n\nAfter 6 seconds, DisplayPerson calls `StatehasChanged`, triggering a rerender. This should give us enough time to load the page, update the state within the UpdatePerson component and wait and see if DisplayPerson will display the updated name after StateHasChanged has been called. Go quick. You have 6 seconds. If all goes well, DisplayPerson, after 6 seconds, should display the updated name since it is referencing the same object.\n\n![Data-binding with a delay](/media/data-binding-with-a-delay.gif)\n\nNotice that the name is updating to match user input\n\n- - -\n\n## Conclusion\n\nIn summary, Blazor supports component-based data-binding, a process for keeping the ViewModel and view in sync. Data-binding is component based and will not work across components. In future articles, I will examine methods for sharing data across components and ensuring components use and reflect the most up-to-date data.\n"},{"filePath":"/home/runner/work/couchdev/couchdev/posts/2018-05-24-typescript-runtime-safety.mdx","data":{"template":"post","title":"TypeScript and Runtime Type Safety","slug":"typescript-and-runtime-type-safety","published":true,"date":"2018-05-24","description":"Intellisense, type definitions, tooling, and documentation. A few of the benefits that follow from TypeScript's compile-time static type system but it's not all good news. There are some drawbacks. For starters, the type checking, and thus type safety, occur at compile time. What about Runtime type safety?","category":"TypeScript","tags":["TypeScript"]},"content":"\nI began programming in TypeScript by accident. I was exploring Microsoft's new ASP.NET Core framework and before I knew it, I was writing code in TypeScript.\n\nIt wasn't my fault. My IDE of choice made the decision for me, without my consent. Visual Studio had decided to scaffold out a project with TypeScript. I thought, \"why not?\". After all, learning TypeScript was a longtime desire of mine and a chore I put off for long enough. It was time to learn TypeScript.\n\nI was immediately drawn to the type system. The compiler provides type safety and valuable feedback. Take the following code for example:\n\n```ts\nexport function add(a: number, b: number): number {\n    return a + b;\n}\n```\n\nValid TypeScript. Now let's call, or should I say miscall, `add`.\n\n```ts\nadd('Hello', { name: \"World\" });\n```\n\nNot so valid. Don't be mistaken, this is valid JavaScript but not valid TypeScript. `'Hello'` and `{ name: \"World\" }` are invalid arguments for `add` since they are not numbers. The compiler will inform us of this blunder.\n\nWriting application code in TypeScript adds type safety, a great benefit to developers. Editing `add` to accept strings instead of numbers will cause the compiler to explode. That is until we update all calls of `add` to use strings. A valuable feedback loop useful for refactoring. The compiler is the first line of defense.\n\nWriting reusable JavaScript libraries in TypeScript is a different matter. What if we were to package and distribute `add` as a JavaScript library? The following is the compiled JavaScript version of `add`.\n\n```js\nexport function add(a, b) {\n    return a + b;\n}\n```\n\nThat's right. TypeScript's compiler removes all information about types. This makes sense. TypeScript compiles to valid JavaScript, which does not have a static type system. Though it provides compile-time type safety, TypeScript **does not** provide runtime type safety.\n\nCompilation removes type information and restraints on `add`. Developers using the compiled library may call `add` with strings instead of numbers. Nothing prevents them from doing so.\n\n---\n\n## Solution\n\nAs always with library development, consider end users and write unit tests for all use cases. On top of unit tests, consider writing runtime type checks. This will prevent misuse of code or provide relevant feedback when misuse occurs.\n\n```ts\nexport function add(a: number, b: number): number {\n    if(typeof a !== 'number') {\n        throw new TypeError('....');\n    }\n    if(typeof b !== 'number') {\n        throw new TypeError('....');\n    }\n    return a + b;\n}\n```\n\nThe above is still valid, and beautiful, TypeScript. The compiler has no problems with the extra type guards.\n"},{"filePath":"/home/runner/work/couchdev/couchdev/posts/2018-03-16-authoring-typescript-libraries.mdx","data":{"title":"Authoring TypeScript Libraries","date":"2018-03-16","template":"post","published":true,"slug":"authoring-typescript-libraries","category":"TypeScript","tags":["TypeScript"],"description":"You've written a TypeScript library. Now what? Time to publish, of course. But how? Do you publish it as a TypeScript module or compile it to JavaScript? Should it run in browser or Node.js, or both? What about ES5  versus ES6 or ESNext? And don't forget, some people prefer AMD modules."},"content":"\n## Problem\n\nYou've written a TypeScript library. Now what? Time to publish, of course. But how? Do you publish it as a TypeScript module or compile it to JavaScript? Should it run in browser or Node.js? Or both? What about ES5 versus ES6 or ESNext? And don't forget, some people prefer AMD modules.\n\nIn this article, I address all of these concerns and more. I will show you how to publish a TypeScript library to a broad audience. Publishing a TypeScript library can be complicated, but it doesn't have to be.\n\n## TLDR\n\nUse tsc to compile TypeScript source code to ES modules. Use webpack + babel to transpile ES modules to a umd package. Providing ES modules and a umd package supports a larger developer community.\n\n---\n\n## Solution\n\nA two-step build process.\n\n1. Compile TypeScript source code to ES modules using `tsc`, the TypeScript compiler.\n2. Bundle ES modules into a single umd module using webpack and babel.\n\n---\n\n## Why\n\nProviding both ES modules and a umd package gives developers options. Those working in modern ES2015+ environments can use the ES modules while the umd package supports those working in commonjs or web browser environments. Plus, modern build tools, such as Webpack and rollup, take advantage of ES modules. Build tools will parse, traverse and eliminate unused (dead) code of ES module dependencies.\n\n---\n\n## Why Webpack\n\nUnfortunately, the [TypeScript compiler does not support global fallbacks when compiling to umd](https://github.com/Microsoft/TypeScript/issues/8436). In short, umd packages produced by TypeScript do not support web browsers. Webpack, on the other hand, builds umd packages that support web browsers along with commonjs and amd environments.\n\n---\n\n## Why Babel\n\nTo transpile ES2015 to the more widely supported ES5.\n\n---\n\n## Is Compilation Necessary\n\nWhat about writing TypeScript libraries for TypeScript developers? Is a build process necessary?\n\nYes. TypeScript does not compile dependencies (packages listed in node_modules). TypeScript libraries need to be compiled to JavaScript before publishing, even if the intended audience is TypeScript developers.\n\n---\n\n## Project Structure\n\n```asciidoc\nProject/\n|-- src/\n    |-- sayHello.ts\n    |-- index.ts\n|-- tsconfig.json\n|-- webpack.config.js\n|-- package.json\n```\n\n### sayHello.ts\n\nA simple function to say hello! This is the only functionality of my awesome library.\n\n```js\nexport function sayHello(name: string): void {\n  console.log(`Hello, ${name}`);\n}\n```\n\n### index.ts\n\nThis is the main entry point to the library and, as such, exposes the public API.\n\n```js\nexport { sayHello } from \"./sayHello\";\n```\n\n### tsconfig.json\n\nThe following options instruct the TypeScript compiler to output ES2015 modules.\n\n```json\n{\n  \"compilerOptions\": {\n    /* Basic Options */\n    \"target\": \"ES2015\" /* Build to ES2015 */,\n    \"module\": \"ES2015\" /* using ES2015 modules */,\n    \"lib\": [\"es2015\", \"dom\"] /* Using ES2015 features and DOM APIs  */,\n    \"declaration\": true /* Generates corresponding'.d.ts' files. */,\n    \"declarationDir\": \"./dist/typings/\" /* build '.d.ts' files to ./dist/typeings */,\n    \"outDir\": \"./dist/esm/\" /* build to ./dist/esm/ */\n  },\n  \"files\": [\"./src/index.ts\"],\n  \"include\": [\"./src/**/*.ts\"]\n}\n```\n\n- **declarations**: set to true, `tsc` outputs type definition files which, in turn, provides code intellisense support to TypeScript developers using the library.\n- **files** specifies which files to compile. In this case, the main entry point to the library is listed. Compiling the main entry point, index.ts, compiles the rest of the library through dependencies.\n\n### webpack.config.js\n\nWebpack bundles ES modules outputted by `tsc` as a single umd package, targeting ES5. Developers can load the umd package within web browsers, via a script tag, or within commonjs or amd environments.\n\n```js\nconst path = require(\"path\");\n\nmodule.exports = (env, argv) =\u003e {\n  return {\n    entry: {\n      index: path.resolve(__dirname, \"./dist/esm/index.js\")\n    },\n    output: {\n      path: path.resolve(__dirname, \"./dist/umd\"), // builds to ./dist/umd/\n      filename: \"[name].js\", // index.js\n      library: \"myLibrary\", // aka window.myLibrary\n      libraryTarget: \"umd\", // supports commonjs, amd and web browsers\n      globalObject: \"this\"\n    },\n    module: {\n      rules: [{ test: /\\.t|js$/, use: \"babel-loader\" }]\n    }\n  };\n};\n```\n\n- **entry** specifies the entry point to the library. In this setup, webpack transpiles ES2015 to ES5 and does not compile TypeScript source code. For this reason, the file outputted by `tsc`, which is an ES2015 module, is specified as the input for webpack.\n- **library** specifies the global variable name to use within web browsers.\n- **globalObject** sets the global fallback object. The default is `window`, which is not defined in commonjs environments. Setting the global fallback object to `this` generates a umd package that supports both commonjs and web browser environments.\n- **module.rules**: In this setup, webpack uses babel to transpile ES2015 code to the more widely supported ES5 syntax.\n\n### package.json\n\nAdd the following to package.json\n\n```json\n{\n  \"main\": \"./dist/umd/index.js\",\n  \"module\": \"./dist/esm/index.js\",\n  \"types\": \"./dist/typings/index.d.ts\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" \u0026\u0026 exit 1\",\n    \"build\": \"webpack\",\n    \"prebuild\": \"tsc\"\n  },\n  \"devDependencies\": {\n    \"babel-core\": \"^6.26.0\",\n    \"babel-loader\": \"^7.1.4\",\n    \"typescript\": \"^2.7.2\",\n    \"webpack\": \"^4.1.1\",\n    \"webpack-cli\": \"^2.0.11\"\n  }\n}\n```\n\n- **main** specifies the location of the umd package. Commonjs environments use this as the main entry point to the library.\n- **module** specifies the location of the main ES2015 module. Consuming packages that use webpack or rollup will use this as the main entry point to the library and will eliminate unused (dead) code when bundling the library.\n- **types** specifies the location of type definition files. Type definition files provide code intellisense and autocompletion support to TypeScript developers using the library.\n- **scripts.build** runs `webpack`, transpiling ES2015 modules to an ES5 umd package.\n- **scripts.prebuild** runs `tsc`, compiling TypeScript to ES2015 modules. This command automatically runs prior to `npm run build`.\n- **devDependencies** lists the minimal set of packages needed to build both ES2015 modules and a umd package. Don't forget to run `npm install`.\n\n---\n\n## Build\n\n```shell\n$ npm run build\n```\n\nOutputs\n\n![npm-build](/media/npm-build.png)\n\n---\n\n## Consume the built code\n\n### Web Browsers via script tags\n\n```html\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n  \u003chead\u003e\n    \u003cmeta charset=\"UTF-8\" /\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /\u003e\n    \u003cmeta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\" /\u003e\n    \u003cscript src=\"./path/to/dist/umd/index.js\"\u003e\u003c/script\u003e\n    \u003cscript\u003e\n      // webpack exposes the library as a global, myLibrary\n      myLibrary.sayHello(\"World\");\n    \u003c/script\u003e\n  \u003c/head\u003e\n  \u003cbody\u003e\u003c/body\u003e\n\u003c/html\u003e\n```\n\n### commonjs (Node)\n\n```js\nvar myLibrary = require(\"myLibrary\");\n\nmyLibrary.sayHello(\"World\");\n```\n\n### ES modules\n\n```js\nimport { sayHello } from \"myLibrary/esm/sayHello\";\n\nsayHello(\"World\");\n```\n\nDevelopers using webpack do not have to specify ES module paths. Webpack will automatically use the ES modules based on the module path specified in package.json.\n\n**webpack**\n\n```js\nimport { sayHello } from \"myLibrary\";\n\nsayHello(\"World\");\n```\n"},{"filePath":"/home/runner/work/couchdev/couchdev/posts/2017-11-12-aspnet-linux-edition.mdx","data":{"title":"ASP.NET Core. Linux Edition","date":"2017-11-12","template":"post","published":true,"slug":"aspnet-linux-edition","category":"ASP.NET Core","tags":["ASP.NET Core","Linux","Docker"],"description":"ASP.NET Core + Linux = Freedom. Love ASP.NET? What about Linux? Do you wish to bring the two together? Well now you can with ASP.NET core. Deploy your favorite web stack to your favorate hosting environment. Or, develop from the comfort of your favorite MacBook or Linux box."},"content":"\n[ASP.NET Core](https://www.microsoft.com/net/learn/apps/web); When the cross-platform version of the infamous ASP.NET we all love (to hate?) was released I immediately began exploring the process of deploying a .NET web application to a Linux host. After all, I was already running several [Node.js](https://nodejs.org) web applications on a Linux box so why not add a few ASP.NET applications and host all apps under one roof. Plus I had to see it to believe it; a Microsoft web app running in a Linux environment!\n\nIn this article, I walk through the process of deploying an ASP.NET application to a Linux environment. The application will run inside a [Docker](https://www.docker.com/) container within a Ubuntu host. The Docker environment is managed with [Dokku](http://dokku.viewdocs.io/dokku/) which makes it possible to kick off builds and deployments with simple git pushes. Dokku will also handle (sub)domain routing by managing [nginx](https://www.nginx.com/); good riddance.\n\n**Update:** The final source code lives [here](https://github.com/dworthen/aspnet-linux-edition/tree/1.0.0).\n\n---\n\n## Setup\n\n1. [Download and install dotnet](https://dot.net) on your development environment.\n2. [Install Dokku on a fresh Ubuntu environment](http://dokku.viewdocs.io/dokku/getting-started/installation/).\n   - I am using [Linode](https://www.linode.com/) to host a Ubuntu 16.04 LTS environment. Instructions for installing Dokku on Linode can be found [here](http://dokku.viewdocs.io/dokku~v0.6.2/getting-started/install/linode/).\n   - Alternatively, use [Windows Subsystem for Linux](https://msdn.microsoft.com/en-us/commandline/wsl/install-win10) to explore this process on a local machine.\n3. [Optional] Point a [FQDN](https://en.wikipedia.org/wiki/Fully_qualified_domain_name) towards the Ubuntu host. If using Linode, as I am, then check out their [DNS Manager](https://www.linode.com/docs/networking/dns/dns-manager-overview).\n   - For this article, I have both derekworthen.com, `\u003cSERVER_ADDRESS\u003e`, and blog-demo-aspnet-linux-environment.derekworthen.com, `\u003cFQDN\u003e`, pointing towards my Dokku configured server. `\u003cAPP_NAME\u003e` refers to blog-demo-aspnet-linux-environment.\n\n---\n\n## App Creation\n\nSince this article is focused on the process of deploying to a Ubuntu host we will stick with creating a bare-bones web application. Visit Microsoft docs for an in-depth guide to [getting started with ASP.NET Core](https://docs.microsoft.com/en-us/aspnet/core/mvc/razor-pages/?tabs=visual-studio).\n\n#### .NET Core CLI\n\nAt the time of this writing, I am using .Net CLI tools and SDK version 2.0.2 to create a sample app but any version of .NET Core should work.\n\n**Note:** Run `dotnet --info` to print out the version of dotnet CLI tools and SDK installed.\n\n```shell\nmkdir \u003cAPP_NAME\u003e \u0026\u0026 cd \u003cAPP_NAME\u003e \u0026\u0026 dotnet new razor\n```\n\nVerify the app builds and runs with `dotnet restore \u0026\u0026 dotnet run`. Head over to localhost:5000 for a front row viewing of the out-of-the-box ASP.NET template in all its glory.\n\n![Default ASP.NET application running on port 5000](/media/aspnetcore-app.png)\n\n---\n\n## App Management with Dokku\n\nShell into the Ubuntu host as the dokku user account created during the setup process. I am using the [Windows Subsystem for Linux](https://msdn.microsoft.com/en-us/commandline/wsl/install-win10) to drop into Bash and connect to the server instead of using an application like [Putty](http://www.putty.org/). Mac and Linux users can ignore the `bash -c` part of the command and delete the quotes surrounding the `ssh` command.\n\n```shell\nbash -c \"ssh dokku@\u003cSERVER_ADDRESS\u003e\"\n```\n\n#### Dokku\n\n```shell\n# Linux host\n$ dokku apps:create \u003cAPP_NAME\u003e\n```\n\nThis will create a git repo at `\u003cSERVER_ADDRESS\u003e:\u003cAPP_NAME\u003e`, e.g., derekworthen\\.com:blog-demo-aspnet-linux-environment in my case. Dokku will also register a reverse proxy routing with nginx using the `\u003cAPP_NAME\u003e` as the subdomain to create the app's `\u003cFQDN\u003e`, e.g., blog-demo-aspnet-linux-environment.derekworthen.com. By default, Dokku will configure nginix to route all traffic on port 80 and 443 (if SSL is enabled) that matches the `\u003cFQDN\u003e` to port 5000 of the app's docker container.\n\n#### Git\n\nOn the local machine, initialize git and add a remote location for the newly created dokku repo. (Don't forget to add an [appropriate](https://www.gitignore.io/api/aspnetcore) [.gitignore](https://www.gitignore.io/) file to the project.)\n\n```shell\n# Local development machine\ngit init \u0026\u0026 git add . \u0026\u0026 git commit -m \"initial commit\"\n# Must use the dokku user account created during the setup process\ngit remote add dokku dokku@\u003cSERVER_ADDRESS\u003e:\u003cAPP_NAME\u003e\n```\n\nUp until now, we have been following the [basic guide for deploying a Dokku app](http://dokku.viewdocs.io/dokku/deployment/application-deployment/). We will now follow the instructions for [Dockerfile deployment](http://dokku.viewdocs.io/dokku/deployment/methods/dockerfiles/). Dokku will build, run and deploy a docker container based on the provided Dockerfile.\n\n#### Dockerfile; Building and Running ASP.NET Core Applications\n\nCreate a `Dockerfile` in the root of the application with the following contents.\n\n```docker\n# Stage 1. Building.\n# May need use a different tag to get the build to work.\n# https://hub.docker.com/r/microsoft/aspnetcore-build/\nFROM microsoft/aspnetcore-build:2.0.2\nWORKDIR /source\n\n# caches restore result by copying csproj file separately\n# copies project files into the /source/ of the container.\nCOPY *.csproj .\n\n# Restore dotnet dependencies\nRUN dotnet restore\n\n# copies the rest of your code into /source/\nCOPY . .\n\n# microsoft/aspnetcore-build image contains Node\n# so may also run npm install\n# or other npm related scripts.\n# RUN npm install\n# RUN npm run build\n\n# Builds to /out in the root of the container\nRUN dotnet publish --output /out/ --configuration Release\n\n# Set environment variables for container\n# Dokku maps external port 80 to internal port 5000 and\n# the following lines tells ASP.NET to listen on port 5000\n# May also omit the following line and add EXPOSE 80\n# This will tell dokku to setup port mapping 80:80 instead 80:5000\n# and omitting this environment variable will also tell ASP.NET Core\n# to listen on port 80\nENV ASPNETCORE_URLS http://*:5000\n# EXPOSE 80\n\n# Stage 2. Running the application\nWORKDIR /out\nENTRYPOINT [\"dotnet\", \"\u003cAPP_NAME\u003e.dll\"]\n```\n\nThe above Dockerfile provides a runtime environment along with tools to build from source code. In a future article, I will cover deploying to a Dokku configured server using a CI/CD pipeline where the build artifacts are created prior to the Docker image. In such scenario, the Docker container does not need build tools and can be imaged from `microsoft/aspnetcore` for the runtime environment.\n\n#### Deploy\n\nIt is finally time to push the project to the hosting server with git and watch Dokku build and run the application!\n\n```shell\ngit add Dockerfile \u0026\u0026 git commit -m \"Add Dockerfile\"\ngit push dokku master\n```\n\nIf all goes well, Dokku will build and deploy a docker container housing our beautiful ASP.NET application and expose it to the world at the configured `\u003cFQDN\u003e`, e.g., http://blog-demo-aspnet-linux-environment.derekworthen.com/.\n\n![Deploying a Dokku app](/media/deploy-dokku-app.png)\n\n## Conclusion\n\nUsing Dokku as a simple [PaaS](https://en.wikipedia.org/wiki/Platform_as_a_service), we managed to deploy an ASP.NET Core web application to a Ubuntu server bundled as a Docker container. Now that the app creation and configuration is out of the way, changes pushed to the dokku remote location will rebuild and redeploy the application.\n\n---\n\n## Bonus; SSL Encryption\n\nWith the [Lets Encrypt](https://letsencrypt.org/) [Dokku plugin](https://github.com/dokku/dokku-letsencrypt), this could not be easier.\n\n#### Install\n\n```shell\n# Need to be logged in as a sudo user instead of the dokku user account\n$ sudo dokku plugin:install https://github.com/dokku/dokku-letsencrypt.git\n```\n\n#### Configure\n\n```shell\n$ dokku config:set --no-restart \u003cAPP_NAME\u003e DOKKU_LETSENCRYPT_EMAIL=\u003cEMAIL\u003e\n```\n\n#### Enable\n\n```shell\n$ dokku letsencrypt \u003cAPP_NAME\u003e\n```\n\n#### Auto-renew\n\n```shell\n$ dokku letsencrypt:cron-job --add\n```\n\n#### Verify\n\n```shell\n$ dokku proxy:report \u003cAPP_NAME\u003e\n```\n\nLook for a https:443:5000 port mapping in the output.\n\n#### Test\n\nOpen your favorite web browser and navigate to the https (or http as it should redirect to https) version of your site.\n"},{"filePath":"/home/runner/work/couchdev/couchdev/posts/2016-06-15-sticky-table-head.mdx","data":{"title":"Fixed HTML Table Header","date":"2016-06-15","template":"post","published":true,"slug":"sticky-table-head","category":"JavaScript","tags":["HTML","CSS","JavaScript"],"description":"Large HTML tables got you down? Easily fix table headers for readability. Best part. No framework or library necessary."},"content":"\nScrolling down a long list of tabular data without fixed column headings is annoying.\n\n## TLDR\n\n[Skip to the end to view source code and working demo](#demo)\n\n---\n\nMost solutions solutions to the question \"how to create [sticky table headers](https://css-tricks.com/scroll-fix-content/)\" typically take one of two approaches.\n\n1. Add a fixed position to the thead or first row of the table. This approach is simple and suffices if the table is the first or only element on the page. What I am after is a scroll-then-fixed solution. Here is an [example](https://css-tricks.com/examples/PersistantHeaders/) of what I am after.\n2. Use JavaScript to duplicate the first table row and place it in a new table fixed to the top of the page and reveal or hide the duplicated row depending on the viewer's scroll position. This approach feels messy and and its worth mentioning that any event listeners set on the original elements will not work on the duplicated row (unless using [event delegation](https://davidwalsh.name/event-delegate)).\n\nThe approach I am after is somewhere in the middle. A scroll-then-fixed solution using the original column headings to maintain event listeners.\n\n#### HTML\n\n```html\n\u003ctable\u003e\n  \u003cthead\u003e\n    \u003ctr\u003e\n      \u003cth\u003eCol 1\u003c/th\u003e\n      \u003cth\u003eCol 2\u003c/th\u003e\n      \u003cth\u003eCol 3\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003ctd\u003eOne\u003c/td\u003e\n      \u003ctd\u003eTwo\u003c/td\u003e\n      \u003ctd\u003eThree\u003c/td\u003e\n    \u003c/tr\u003e\n    ...\n  \u003c/tbody\u003e\n\u003c/table\u003e\n```\n\nThe HTML is straightforward. Moving on...\n\n#### CSS\n\n```css\n.fixed {\n  position: fixed;\n  top: 0;\n}\n```\n\nNot much to the CSS either. The `.fixed` class will be added to the thead element when a viewer scrolls to the table.\n\n#### JS\n\n```js\n/**\n* First Calculate\n*   - Where the thead lies on the page\n*   - Where the table lies on the page\n*   - Table height\n**/\nvar table = document.querySelector('table'),\n    thead = table.querySelector('thead'),\n    theadOffset = thead.getBoundingClientRect().top,\n    tableHeight = +getComputedStyle(table)\n                   .getPropertyValue('height')\n                   .split('px')[0],\n    tableOffset = table.getBoundingClientRect().top,\n    tableCells = document.querySelectorAll('th, td');\n\n// Set the widths on all table cells so they dont resize when fixing\n// the first row\nfor (var i = 0, l = tableCells.length; i \u003c l; i++) {\n  var cell = tableCells[i];\n  cell.width = getComputedStyle(el).getPropertyValue('width');\n}\n\nfunction fixTableHeader(e) {\n  // If viewer has scrolled past the first row\n  // then fix/stick it to the top of the page\n  if( window.pageYOffset \u003e theadOffset ) {\n    thead.classList.add('fixed');\n  }\n\n  // If viewer has scrolled back above or past the table\n  // then unfreeze the first row.\n  if ( window.pageYOffset \u003c theadOffset ||\n       window.pageYOffset \u003e (tableOffset + tableHeight)) {\n      thead.classList.remove('fixed');\n  }\n\n}\n\n// Listen...\nwindow.addEventListener('scroll', fixTableHeader, false);\n```\n\n## DEMO\n\n\u003cp data-height=\"265\" data-theme-id=\"dark\" data-slug-hash=\"XKKMBo\" data-default-tab=\"result\" data-user=\"dworthen\" data-embed-version=\"2\" data-pen-title=\"Fixed Table Head\" data-preview=\"true\" class=\"codepen\"\u003eSee the Pen \u003ca href=\"https://codepen.io/dworthen/pen/XKKMBo/\"\u003eFixed Table Head\u003c/a\u003e by Derek Worthen (\u003ca href=\"https://codepen.io/dworthen\"\u003e@dworthen\u003c/a\u003e) on \u003ca href=\"https://codepen.io\"\u003eCodePen\u003c/a\u003e.\u003c/p\u003e\n\u003cscript async src=\"https://production-assets.codepen.io/assets/embed/ei.js\"\u003e\u003c/script\u003e\n"},{"filePath":"/home/runner/work/couchdev/couchdev/posts/2016-04-20-hello-world.mdx","data":{"title":"Hello World","date":"2016-04-20","template":"post","published":true,"slug":"hello-world","category":"About Me","tags":["About Me"],"description":"Welcome to my blog!"},"content":"\nHello world! What else is there to say?\n\nThis is my bajillionth attempt at starting a blog. Each attempt has resulted in the same outcome; loss of interest and destruction of once beloved blog.\n\nLet's see if this one sticks around.\n"}]},"__N_SSG":true},"page":"/","query":{},"buildId":"S8cK6DE9xT0BN4hLizJQh","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-4a659121523c89b6d810.js"></script><script src="/_next/static/chunks/main-6fd6122508a3ecee2da5.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/3ef630e34cd10ba68f9d468ac363ff81c534e1e9.386717e5d53cbb6c2786.js" async=""></script><script src="/_next/static/chunks/6335da8543c52d3af527c387f688061357787349.6e2460ecc34e06341fc5.js" async=""></script><script src="/_next/static/chunks/pages/_app-226a516cb1542ff60218.js" async=""></script><script src="/_next/static/chunks/pages/index-6c809aeb8517bc05062f.js" async=""></script><script src="/_next/static/S8cK6DE9xT0BN4hLizJQh/_buildManifest.js" async=""></script><script src="/_next/static/S8cK6DE9xT0BN4hLizJQh/_ssgManifest.js" async=""></script></body></html>